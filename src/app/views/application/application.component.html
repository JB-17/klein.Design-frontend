<div class="application-form">
  <mat-horizontal-stepper #stepper linear="true">
    <mat-step *ngFor="let form of formArray.controls; index as i" [stepControl]="getFormGroup(i)" label="step">
      <form>
        <div [formGroup]="getFormGroup(i)" class="formGroup">
          <ng-container *ngFor="let input of forms[i]">
            <ng-container *ngIf="!(input.type === 'textarea' || input.type === 'select' || input.type === 'upload')">
              <mat-form-field appearance="outline">
                <mat-label>{{input.label}}</mat-label>
                <input matInput [required]="input.isRequired" [type]="input.type" [formControlName]="input.formControlName">
                <mat-error>{{input.label}} wird benötigt</mat-error>
              </mat-form-field>
            </ng-container>
            <ng-container *ngIf="input.type === 'textarea'">
              <mat-form-field appearance="outline">
                <mat-label>{{input.label}}</mat-label>
                <textarea matInput matTextareaAutosize [required]="input.isRequired" [formControlName]="input.formControlName"></textarea>
              </mat-form-field>
            </ng-container>
            <ng-container *ngIf="input.type === 'select'">
              <mat-form-field appearance="outline">
                <mat-label>{{input.label}}</mat-label>
                <mat-select [formControlName]="input.formControlName">
                  <mat-option *ngFor="let option of input.options" [value]="option">
                    {{option}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </ng-container>
            <ng-container *ngIf="input.type === 'upload'">
              <label>{{input.label}}</label>
              <input [multiple]="input.multiple" type="file" />
            </ng-container>
          </ng-container>
        </div>
        <div class="buttons">
          <button mat-raised-button *ngIf="i > 0" type="button" matStepperPrevious>Letzte Seite</button>
          <button mat-raised-button *ngIf="i < 4" type="button" class="btn-right" matStepperNext>Nächste Seite</button>
        </div>
      </form>
    </mat-step>
  </mat-horizontal-stepper>
</div>
